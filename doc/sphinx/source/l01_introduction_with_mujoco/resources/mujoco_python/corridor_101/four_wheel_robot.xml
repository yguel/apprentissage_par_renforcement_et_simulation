<mujoco model="four_wheel_robot">
  <compiler angle="degree" autolimits="true"/>
  <!-- Physics settings removed - now controlled by environment -->
  <size njmax="1000" nconmax="500"/>

  <default>
    <geom rgba="0.7 0.7 0.7 1" friction="1.2 0.002 0.0001" solref="0.02 1" solimp="0.9 0.95 0.001" condim="3"/>
  </default>

  <asset>
    <material name="mat_chassis" rgba="0.3 0.3 0.35 1"/>
    <material name="mat_wheel"   rgba="0.1 0.1 0.1 1"/>
    <material name="mat_floor"   rgba="0.85 0.85 0.85 1"/>
  </asset>

  <worldbody>
    <!-- Robot base (free joint), with 4 wheels -->
    <body name="robot" pos="0 0 0.2">
      <!-- Free joint so the robot can move anywhere, with damping for stability -->
      <joint name="root" type="free" damping="0.1"/>

      <!-- Chassis -->
      <!-- box size = half-dimensions: x=0.30, y=0.20, z=0.10  (full size: 0.8 x 0.6 x 0.2 m) -->
      <geom name="chassis" type="box" size="0.30 0.20 0.10" material="mat_chassis" mass="15"/>

      <!-- Wheel parameters -->
      <!-- wheel radius r, half-length (width/2) w/2. Cylinder’s axis is local Z; we rotate with euler="90 0 0"
           so the cylinder’s axis aligns with world Y (the hinge axis below). -->
      <!-- Positions: +-x_off, +-y_off from chassis center -->
      <!-- Extended wheels outside chassis for better visibility: 0.25 + 0.05 = 0.30 -->
      <body name="wheel_fl" pos=" 0.25  0.20 -0.10">  <!-- front-left -->
        <joint name="hinge_fl" type="hinge" axis="0 1 0" damping="0.2" limited="false"/>
        <geom  name="geom_fl"  type="cylinder" size="0.15 0.03" euler="90 0 0" material="mat_wheel" mass="1.0"/>
      </body>

      <body name="wheel_fr" pos=" 0.25 -0.20 -0.10">  <!-- front-right -->
        <joint name="hinge_fr" type="hinge" axis="0 1 0" damping="0.2" limited="false"/>
        <geom  name="geom_fr"  type="cylinder" size="0.15 0.03" euler="90 0 0" material="mat_wheel" mass="1.0"/>
      </body>

      <body name="wheel_rl" pos="-0.25  0.20 -0.10">  <!-- rear-left -->
        <joint name="hinge_rl" type="hinge" axis="0 1 0" damping="0.2" limited="false"/>
        <geom  name="geom_rl"  type="cylinder" size="0.15 0.03" euler="90 0 0" material="mat_wheel" mass="1.0"/>
      </body>

      <body name="wheel_rr" pos="-0.25 -0.20 -0.10">  <!-- rear-right -->
        <joint name="hinge_rr" type="hinge" axis="0 1 0" damping="0.2" limited="false"/>
        <geom  name="geom_rr"  type="cylinder" size="0.15 0.03" euler="90 0 0" material="mat_wheel" mass="1.0"/>
      </body>
    </body>
  </worldbody>

  <!-- Drive each wheel with a velocity motor (rad/s). Use left/right differentials to steer. -->
  <actuator>
    <!-- Reduced kv gain for realistic speed control -->
    <velocity name="motor_fl" joint="hinge_fl" kv="20" ctrllimited="true" ctrlrange="-10 10"/>
    <velocity name="motor_fr" joint="hinge_fr" kv="20" ctrllimited="true" ctrlrange="-10 10"/>
    <velocity name="motor_rl" joint="hinge_rl" kv="20" ctrllimited="true" ctrlrange="-10 10"/>
    <velocity name="motor_rr" joint="hinge_rr" kv="20" ctrllimited="true" ctrlrange="-10 10"/>
  </actuator>
</mujoco>
