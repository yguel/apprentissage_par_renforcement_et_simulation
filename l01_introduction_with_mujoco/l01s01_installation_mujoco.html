

<!DOCTYPE html>
<html class="writer-html5" lang="fr" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation d’un environnement MuJoCo &mdash; Documentation Apprentissage par Renforcement et Simulation 1.0.0</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/exercise.css" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=9c3e77be" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=a332d530" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=05dadb3a"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=30646c52"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../_static/togglebutton.js?v=5194a9fd"></script>
      <script src="../_static/translations.js?v=e6b791cb"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Pratiquons avec MuJoCo et l’environnement corridor" href="l01s02_corridor_101.html" />
    <link rel="prev" title="Introduction avec MuJoCo" href="l01s00_index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Apprentissage par Renforcement et Simulation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Apprentissage par Renforcement et Simulation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="l01s00_index.html">Introduction avec MuJoCo</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Installation d’un environnement MuJoCo</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#premieres-verifications-de-l-installation">Premières vérifications de l’installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="l01s02_corridor_101.html">Pratiquons avec MuJoCo et l’environnement corridor</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Apprentissage par Renforcement et Simulation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="l01s00_index.html">Introduction avec MuJoCo</a></li>
      <li class="breadcrumb-item active">Installation d’un environnement MuJoCo</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/l01_introduction_with_mujoco/l01s01_installation_mujoco.rst.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation-d-un-environnement-mujoco">
<h1>Installation d’un environnement MuJoCo<a class="headerlink" href="#installation-d-un-environnement-mujoco" title="Lien vers cette rubrique"></a></h1>
<ol class="arabic simple">
<li><p>Installation en utilisant docker. C’est la plus simple et qui marche sur windows, mac et linux.</p></li>
</ol>
<p>Dans la salle de cours, docker est déjà installé sur les machines linux. Si vous êtes sur votre propre machine, suivez les instructions ci-dessous pour installer docker.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Comment installer Docker sur votre machine si besoin ?</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-0">
Installer Docker sur Linux</label><div class="sd-tab-content docutils">
<p class="sd-card-text">Pour installer docker sur linux, vous pouvez suivre les instructions officielles: <a class="reference external" href="https://docs.docker.com/engine/install/">https://docs.docker.com/engine/install/</a>.</p>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-1">
Installer Docker sur Windows</label><div class="sd-tab-content docutils">
<p class="sd-card-text">Pour installer docker sur Windows, vous pouvez suivre les instructions officielles: <a class="reference external" href="https://docs.docker.com/desktop/install/windows-install/">https://docs.docker.com/desktop/install/windows-install/</a>.</p>
</div>
<input id="sd-tab-item-2" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-2">
Installer Docker sur Mac</label><div class="sd-tab-content docutils">
<p class="sd-card-text">Pour installer docker sur Mac, vous pouvez suivre les instructions officielles: <a class="reference external" href="https://docs.docker.com/desktop/install/mac-install/">https://docs.docker.com/desktop/install/mac-install/</a>.</p>
</div>
</div>
</div>
</details><p>Vous pouvez suivre les instructions ci-dessous en fonction de votre système d’exploitation.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-3">
Docker pour Linux (machines de la salle de cours)</label><div class="sd-tab-content docutils">
<ol class="arabic">
<li><p>Créer un dossier pour stocker les fichiers du cours, télécharger le script d’installation et le rendre exécutable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/rl/mujoco<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/rl/mujoco<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>wget<span class="w"> </span>-O<span class="w"> </span>start.sh<span class="w"> </span>https://raw.githubusercontent.com/yguel/docker_mujoco_rl_101/main/start.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>start.sh
</pre></div>
</div>
</li>
<li><p>Lancez le script start.sh</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/rl/mujoco<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>./start.sh
</pre></div>
</div>
</li>
</ol>
<p>Quand vous avez fini votre session de travail, vous devez fermer le docker proprement en utilisant <code class="docutils literal notranslate"><span class="pre">CTRL+C</span></code> dans le terminal où le script a été lancé.</p>
<p>Le script est codé de telle sorte que si vous ne pouvez pas avoir votre répertoire de travail (workspace) persistant (c’est-à-dire que docker ne peut pas monter lier un dossier à l’intérieur de votre répertoire HOME à un volume docker), un workspace temporaire sera créé dans /tmp/rl/mujoco/workspace. Quand vous fermer la session docker avec <code class="docutils literal notranslate"><span class="pre">CTRL+C</span></code>, alors le script fera automatiquement une sauvegarde de ce workspace temporaire dans le dossier que vous avez indiqué dans la variable d’environnement <code class="docutils literal notranslate"><span class="pre">BACKUP_TARGET_DIR</span></code> (par défaut <code class="docutils literal notranslate"><span class="pre">$HOME/rl/docker_snapshots/mujoco_snapshots</span></code>). <br>
Cette configuration n’est pas idéale, mais elle se rencontre fréquemment sur des machines de l’école ou de l’université et en entreprise où les droits d’accès du daemon docker sont limités. <br>
Dans ce cas lorsque vous souhaitez reprendre votre travail, il vous suffira de restaurer votre workspace en décompressant la dernière sauvegarde faite dans le dossier <code class="docutils literal notranslate"><span class="pre">$HOME/rl/docker_snapshots/mujoco_snapshots</span></code> dans le dossier <code class="docutils literal notranslate"><span class="pre">/tmp/rl/mujoco/workspace</span></code>.
<br>
Si vous avez un doute sur le type de workspace que vous utilisez (temporaire ou persistant), vous pouvez vérifier dans le terminal où le script a été lancé, au début de la session docker, un message vous indique quel type de workspace est utilisé.</p>
<p>Exemple d’un workspace temporaire:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">================================</span>
MuJoCo<span class="w"> </span>Desktop<span class="w"> </span>Environment<span class="w"> </span>Ready!
<span class="o">================================</span>
Access<span class="w"> </span>via:
<span class="w">   </span>Desktop:<span class="w"> </span>http://localhost:6080
<span class="w">   </span>Jupyter:<span class="w"> </span>http://localhost:8888
<span class="w">   </span>VNC<span class="w"> </span>Client:<span class="w"> </span>localhost:5901
<span class="w">   </span>Security:<span class="w"> </span>No<span class="w"> </span>password<span class="w"> </span><span class="o">(</span>safe<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span>development<span class="o">)</span>

Workspace<span class="w"> </span>folder:
<span class="hll"><span class="w">   </span>Host:<span class="w"> </span>Temporary:<span class="w"> </span>/tmp/rl/mujoco<span class="w"> </span><span class="o">(</span>will<span class="w"> </span>be<span class="w"> </span>backed<span class="w"> </span>up<span class="w"> </span>on<span class="w"> </span><span class="nb">exit</span><span class="o">)</span>
</span><span class="w">   </span>Container:<span class="w"> </span>/home/student/workspace
<span class="hll"><span class="w">   </span>⚠️<span class="w">  </span>Using<span class="w"> </span>temporary<span class="w"> </span>workspace<span class="w"> </span>-<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>backed<span class="w"> </span>up<span class="w"> </span>on<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>to:<span class="w"> </span>/home/testuser/rl/docker_snapshots/mujoco_snapshots
</span><span class="o">================================</span>
</pre></div>
</div>
<p>Exemple d’un workspace persistant:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">================================</span>
MuJoCo<span class="w"> </span>Desktop<span class="w"> </span>Environment<span class="w"> </span>Ready!
<span class="o">================================</span>
Access<span class="w"> </span>via:
<span class="w">   </span>Desktop:<span class="w"> </span>http://localhost:6080
<span class="w">   </span>Jupyter:<span class="w"> </span>http://localhost:8888
<span class="w">   </span>VNC<span class="w"> </span>Client:<span class="w"> </span>localhost:5901
<span class="w">   </span>Security:<span class="w"> </span>No<span class="w"> </span>password<span class="w"> </span><span class="o">(</span>safe<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span>development<span class="o">)</span>

Workspace<span class="w"> </span>folder:
<span class="hll"><span class="w">   </span>Host:<span class="w"> </span>Persistent:<span class="w"> </span>/home/&lt;username&gt;/rl/mujoco
</span><span class="w">   </span>Container:<span class="w"> </span>/home/student/workspace
<span class="o">================================</span>
</pre></div>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Si vous rencontrez des problèmes</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Si vous rencontrez des problèmes, voyez les paramètres avancés avec la commande help:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./start.sh<span class="w"> </span>--help
</pre></div>
</div>
</div></blockquote>
<p class="sd-card-text">Vous pouvez aussi directement lancer le docker avec des options personnalisées, exemple sans accélération matérielle NVIDIA:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>--name<span class="w"> </span>mujoco-student<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--shm-size<span class="o">=</span>4g<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-p<span class="w"> </span><span class="m">6080</span>:6080<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-p<span class="w"> </span><span class="m">8888</span>:8888<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-v<span class="w"> </span><span class="nv">$HOME</span>/rl/mujoco/workspace:/home/student/workspace<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">HOST_UID</span><span class="o">=</span><span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">HOST_GID</span><span class="o">=</span><span class="k">$(</span>id<span class="w"> </span>-g<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">HOST_WORKSPACE_INFO</span><span class="o">=</span><span class="s2">&quot;Persistent: </span><span class="nv">$HOME</span><span class="s2">/rl/mujoco&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">USE_TEMP_WORKSPACE</span><span class="o">=</span><span class="s2">&quot;false&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">BACKUP_TARGET_DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/rl/docker_snapshots/mujoco_snapshots&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_RESOLUTION</span><span class="o">=</span>1920x1080<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_DEPTH</span><span class="o">=</span><span class="m">24</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_DPI</span><span class="o">=</span><span class="m">96</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">NOVNC_PORT</span><span class="o">=</span><span class="m">6080</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_PORT</span><span class="o">=</span><span class="m">5901</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">DISPLAY</span><span class="o">=</span>:1<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">LIBGL_ALWAYS_SOFTWARE</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">MUJOCO_GL</span><span class="o">=</span>osmesa<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>yguel/mujoco-desktop:v1.0
</pre></div>
</div>
</div></blockquote>
<p class="sd-card-text">exemple avec accélération matérielle NVIDIA:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>--name<span class="w"> </span>mujoco-student<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--shm-size<span class="o">=</span>4g<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-p<span class="w"> </span><span class="m">6080</span>:6080<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-p<span class="w"> </span><span class="m">8888</span>:8888<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-v<span class="w"> </span><span class="nv">$HOME</span>/rl/mujoco/workspace:/home/student/workspace<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">HOST_UID</span><span class="o">=</span><span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">HOST_GID</span><span class="o">=</span><span class="k">$(</span>id<span class="w"> </span>-g<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">HOST_WORKSPACE_INFO</span><span class="o">=</span><span class="s2">&quot;Persistent: </span><span class="nv">$HOME</span><span class="s2">/rl/mujoco&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">USE_TEMP_WORKSPACE</span><span class="o">=</span><span class="s2">&quot;false&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">BACKUP_TARGET_DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/rl/docker_snapshots/mujoco_snapshots&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_RESOLUTION</span><span class="o">=</span>1920x1080<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_DEPTH</span><span class="o">=</span><span class="m">24</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_DPI</span><span class="o">=</span><span class="m">96</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">NOVNC_PORT</span><span class="o">=</span><span class="m">6080</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_PORT</span><span class="o">=</span><span class="m">5901</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--runtime<span class="o">=</span>nvidia<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">NVIDIA_VISIBLE_DEVICES</span><span class="o">=</span>all<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">DISPLAY</span><span class="o">=</span>:1<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">LIBGL_ALWAYS_SOFTWARE</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>yguel/mujoco-desktop:v1.0
</pre></div>
</div>
</div></blockquote>
<p class="sd-card-text">exemple avec un workspace temporaire (à sauvegarder manuellement à la fin de la session):</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>--name<span class="w"> </span>mujoco-student<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--shm-size<span class="o">=</span>4g<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-p<span class="w"> </span><span class="m">6080</span>:6080<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-p<span class="w"> </span><span class="m">8888</span>:8888<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-v<span class="w"> </span>/tmp/rl/mujoco/workspace:/home/student/workspace<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">HOST_UID</span><span class="o">=</span><span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">HOST_GID</span><span class="o">=</span><span class="k">$(</span>id<span class="w"> </span>-g<span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">HOST_WORKSPACE_INFO</span><span class="o">=</span><span class="s2">&quot;Temporary: /tmp/rl/mujoco (will have to be backed up on exit)&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">USE_TEMP_WORKSPACE</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">BACKUP_TARGET_DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/rl/docker_snapshots/mujoco_snapshots&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_RESOLUTION</span><span class="o">=</span>1920x1080<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_DEPTH</span><span class="o">=</span><span class="m">24</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_DPI</span><span class="o">=</span><span class="m">96</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">NOVNC_PORT</span><span class="o">=</span><span class="m">6080</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_PORT</span><span class="o">=</span><span class="m">5901</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">DISPLAY</span><span class="o">=</span>:1<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">LIBGL_ALWAYS_SOFTWARE</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">MUJOCO_GL</span><span class="o">=</span>osmesa<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>yguel/mujoco-desktop:v1.0
</pre></div>
</div>
</div></blockquote>
<p class="sd-card-text">dans ce cas n’oubliez pas de sauvegarder votre workspace à la fin de la session en utilisant le <a class="reference download internal" download="" href="../_downloads/6fb8b948c7dfdf98aaf0343b6fb30cee/save_rl_env.sh"><code class="xref download docutils literal notranslate"><span class="pre">script</span> <span class="pre">de</span> <span class="pre">sauvegarde</span> <span class="pre">automatique</span></code></a>:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./save_rl_env.sh
</pre></div>
</div>
</div></blockquote>
</div>
</details></div>
<input id="sd-tab-item-4" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-4">
Docker pour Windows</label><div class="sd-tab-content docutils">
<p>Note importante, ces instructions n’ont pas été testées, elles sont fournies à titre indicatif.
Merci de me faire un retour si vous les testez et rencontrez des problèmes ou au contraire si tout fonctionne bien.</p>
<p>Dans la suite il faut remplacer <code class="docutils literal notranslate"><span class="pre">&lt;VotreNom&gt;</span></code> par votre nom d’utilisateur windows.</p>
<ol class="arabic">
<li><p>Avec docker desktop installé, ouvrez une fenêtre powershell et créez un dossier pour stocker les fichiers du cours:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span><span class="nv">$HOME</span><span class="se">\r</span>l<span class="se">\m</span>ujoco
</pre></div>
</div>
</li>
<li><p>Si vous n’avez pas d’accélération matérielle NVIDIA, lancer l’image docker manuellement en liant le dossier créé précédemment, en alouant les ports pour jupyter et noVNC, et alouant suffisamment de mémoire (ici 4Go, mais ne mettez pas plus de la moitié de la mémoire totale de votre machine):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>--name<span class="w"> </span>mujoco-student<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>--shm-size<span class="o">=</span>4g<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-p<span class="w"> </span><span class="m">6080</span>:6080<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-p<span class="w"> </span><span class="m">8888</span>:8888<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-v<span class="w"> </span>C:<span class="se">\U</span>sers<span class="se">\&lt;</span>VotreNom&gt;<span class="se">\r</span>l<span class="se">\m</span>ujoco<span class="se">\w</span>orkspace:/home/student/workspace<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">HOST_WORKSPACE_INFO</span><span class="o">=</span><span class="s2">&quot;Persistent: C:\Users\&lt;VotreNom&gt;\rl\mujoco&quot;</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">USE_TEMP_WORKSPACE</span><span class="o">=</span><span class="s2">&quot;false&quot;</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">BACKUP_TARGET_DIR</span><span class="o">=</span><span class="s2">&quot;C:\Users\&lt;VotreNom&gt;\rl\docker_snapshots\mujoco_snapshots&quot;</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_RESOLUTION</span><span class="o">=</span>1920x1080<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_DEPTH</span><span class="o">=</span><span class="m">24</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_DPI</span><span class="o">=</span><span class="m">96</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">NOVNC_PORT</span><span class="o">=</span><span class="m">6080</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_PORT</span><span class="o">=</span><span class="m">5901</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">DISPLAY</span><span class="o">=</span>:1<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">LIBGL_ALWAYS_SOFTWARE</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">MUJOCO_GL</span><span class="o">=</span>osmesa<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>yguel/mujoco-desktop:v1.0
</pre></div>
</div>
</li>
<li><p>Si vous avez une carte graphique NVIDIA compatible avec l’accélération matérielle dans docker, vous pouvez lancer l’image docker avec les options supplémentaires suivantes (à ajouter avant le nom de l’image yguel/mujoco-desktop:v1.0):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>--name<span class="w"> </span>mujoco-student<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>--shm-size<span class="o">=</span>4g<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-p<span class="w"> </span><span class="m">6080</span>:6080<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-p<span class="w"> </span><span class="m">8888</span>:8888<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-v<span class="w"> </span>C:<span class="se">\U</span>sers<span class="se">\&lt;</span>VotreNom&gt;<span class="se">\r</span>l<span class="se">\m</span>ujoco<span class="se">\w</span>orkspace:/home/student/workspace<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>--runtime<span class="o">=</span>nvidia<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">NVIDIA_VISIBLE_DEVICES</span><span class="o">=</span>all<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">HOST_WORKSPACE_INFO</span><span class="o">=</span><span class="s2">&quot;Persistent: C:\Users\&lt;VotreNom&gt;\rl\mujoco&quot;</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">USE_TEMP_WORKSPACE</span><span class="o">=</span><span class="s2">&quot;false&quot;</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">BACKUP_TARGET_DIR</span><span class="o">=</span><span class="s2">&quot;C:\Users\&lt;VotreNom&gt;\rl\docker_snapshots\mujoco_snapshots&quot;</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_RESOLUTION</span><span class="o">=</span>1920x1080<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_DEPTH</span><span class="o">=</span><span class="m">24</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_DPI</span><span class="o">=</span><span class="m">96</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">NOVNC_PORT</span><span class="o">=</span><span class="m">6080</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">VNC_PORT</span><span class="o">=</span><span class="m">5901</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">DISPLAY</span><span class="o">=</span>:1<span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>-e<span class="w"> </span><span class="nv">LIBGL_ALWAYS_SOFTWARE</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="sb">`</span>
<span class="w">   </span>yguel/mujoco-desktop:v1.0
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<section id="premieres-verifications-de-l-installation">
<h2>Premières vérifications de l’installation<a class="headerlink" href="#premieres-verifications-de-l-installation" title="Lien vers cette rubrique"></a></h2>
<ol class="arabic">
<li><p>Dans une autre fenêtre de navigateur, ouvrez l’URL suivante: <a class="reference external" href="http://localhost:8888">http://localhost:8888</a>. Vous devriez voir une interface jupyter.</p></li>
<li><p>Dans une autre fenêtre de navigateur, ouvrez l’URL suivante: <a class="reference external" href="http://localhost:6080">http://localhost:6080</a>. Vous devriez voir une fenêtre NO VNC, vous n’avez plus qu’à cliquer pour vous connecter et vous devriez voir un bureau linux comme sur la <a class="reference internal" href="#fig-docker-ubuntu-start"><span class="std std-numref">Figure 1</span></a> ci-dessous:</p>
<figure class="align-center" id="fig-docker-ubuntu-start">
<img alt="../_images/docker_ok.gif" src="../_images/docker_ok.gif" />
<figcaption>
<p><span class="caption-number">Figure 1 </span><span class="caption-text">Interface graphique utilisant un navigateur pour interagir avec le docker  yguel/mujoco-desktop:v1.0 sous ubuntu avec noVNC.</span><a class="headerlink" href="#fig-docker-ubuntu-start" title="Lien vers cette image"></a></p>
</figcaption>
</figure>
</li>
<li><p>Dans cette dernière fenêtre, vous pouvez maintenant ouvrir un terminal et exécuter les vérifications suivantes.</p></li>
</ol>
<p>Assurez-vous que vous utilisez le navigateur web du docker (celui ouvert avec l’URL <a class="reference external" href="http://localhost:6080">http://localhost:6080</a>) pour faire les vérifications suivantes (cela sera beaucoup plus pratique pour copier/coller les commandes et télécharger les fichiers au bon endroit).
Le navigateur devrait normalement être ouvert à la page suivante: “<a class="reference external" href="https://yguel.github.io/apprentissage_par_renforcement_et_simulation/l01_introduction_with_mujoco/l01s01_installation_mujoco.html#premiere-verification-de-l-installation">https://yguel.github.io/apprentissage_par_renforcement_et_simulation/l01_introduction_with_mujoco/l01s01_installation_mujoco.html#premiere-verification-de-l-installation</a>”.</p>
<p>Pour faire une première vérification que l’installation de MuJoCo s’est bien passée, télécharger le fichier <a class="reference download internal" download="" href="../_downloads/38462f78736a65a0dda59b8d0f9bbbe4/test_mujoco_gl.py"><code class="xref download docutils literal notranslate"><span class="pre">test_mujoco_gl.py</span></code></a>.</p>
<p>vous pouvez exécuter la commande suivante dans un terminal qui place le fichier dans le dossier <cite>~/rl/mujoco/workspace/examples</cite> et l’exécute:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mv<span class="w"> </span>~/Downloads/test_mujoco_gl.py<span class="w"> </span>~/workspace/examples/<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/workspace/examples<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>python3<span class="w"> </span>test_mujoco_gl.py
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="l01s00_index.html" class="btn btn-neutral float-left" title="Introduction avec MuJoCo" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Précédent</a>
        <a href="l01s02_corridor_101.html" class="btn btn-neutral float-right" title="Pratiquons avec MuJoCo et l’environnement corridor" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Manuel YGUEL.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>